
{% extends '../a_layout.html' %}
{% load ui_method %}
{% block css %}
<link rel="stylesheet" href="/static/css/myadmin/daterangepicker.css">
{% endblock %}
{% block title %}
<a type="button" class="btn btn-default back_btn" onclick="history.back()" >ğŸ”™ åé€€</a>             
{% endblock %}
{% block content %}
<div class="box box-primary" style="padding: 15px">
    <div class="box-header">
      <h3 class="box-title">æ·»åŠ æ´»åŠ¨</h3>
    </div><!-- /.box-header -->
    <!-- form start -->
    <form role="form" method="POST" action="" enctype="multipart/form-data">
        {% csrf_token %}
      <div class="box-body">
        <div class="form-group">
          <label for="exampleInputEmail1">æ´»åŠ¨åï¼ˆä¸»é¢˜ï¼‰</label>
          <input type="text" class="form-control" id="exampleInputEmail1" name="campaign_name" value="{% if form_data.campaign_name %}{{ form_data.campaign_name }}{% endif %}">
          {% if form_errors and form_errors.campaign_name %}<span style="color: red">{{ form_errors.campaign_name }}</span>{% endif %}
        </div>
        <div class="form-group">
          <label for="cn_name_abridge">æ´»åŠ¨ä½ç½®</label>
          <input type="text" class="form-control" id="location" name="location" value="{% if form_data.location %}{{ form_data.location }} {% endif %}">
        </div>
        <div class="form-group">
            <label for="en_name">æ´»åŠ¨å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´</label>
            <input type="datetime" class="form-control datetime" name="datetime" placeholder="ç‚¹å‡»é€‰æ‹©æ—¶é—´">
            {% if form_errors and form_errors.datetime %}<span style="color: red">{{ form_errors.datetime }}</span>{% endif %}
        </div>
        
        <div class="form-group">
            <label for="from_country">æ´»åŠ¨ç®€ä»‹</label>
            <textarea name="intorduction" id="" cols="100" rows="10" class="form-control"> {% if form_data.intorduction %}{{ form_data.intorduction }}{% endif %}</textarea>
        </div>
        <div class="form-group">
            <label for="from_country">æ´»åŠ¨æ¨å¹¿å›¾ç‰‡</label>
            <input type="file" class="form-control" name="campaigns_photo_id">
        </div>
        <div class="image-box">
            <img class="campaigns_photo_id" src="{%if form_data and form_data.campaigns_photo_id %}{% build_photo_url form_data.campaigns_photo_id %}{% endif %}" alt="å›¾ç‰‡é¢„è§ˆ" style="width: 300px;height: 300px;">
        </div>
        <br>
        <div class="form-group">
            <label for="from_country">æ´»åŠ¨é¡µé¡¶éƒ¨å›¾ç‰‡</label>
            <input type="file" class="form-control" name="title_photo_id">
        </div>
        <div class="image-box">
            <img class="title_photo_id" src="{%if form_data and form_data.title_photo_id %}{% build_photo_url form_data.title_photo_id %}{% endif %}" alt="å›¾ç‰‡é¢„è§ˆ" style="width: 300px;height: 300px;">
        </div>
      </div><!-- /.box-body -->

      <div class="box-footer">
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
    </form>
  </div>

{% endblock %}
{% block js %}
    <script src="/static/js/myadmin/daterangepicker.js"></script>
    <script>
    $(function(){
        $('.datetime').daterangepicker({
            locale : {  
                    applyLabel : 'ç¡®å®š',  
                    cancelLabel : 'å–æ¶ˆ',  
                    fromLabel : 'èµ·å§‹æ—¶é—´',  
                    toLabel : 'ç»“æŸæ—¶é—´',  
                    customRangeLabel : 'è‡ªå®šä¹‰',  
                    daysOfWeek : [ 'æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­' ],  
                    monthNames : [ 'ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ',  
                                'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ' ],  
                    firstDay : 1  
            },
        });
        var datevalue = '{{form_data.datetime}}'
        if(datevalue){ 
            datevalue = datevalue.split(' - ')
            $('.datetime').data('daterangepicker').setStartDate(datevalue[0])
            $('.datetime').data('daterangepicker').setEndDate(datevalue[1])
        }
        $('input[name="campaigns_photo_id"]').change(function(){
            file = this.files[0]
            var $image_item = $('.campaigns_photo_id')
            var url = null ;
            if (window.createObjectURL!=undefined) { // basic
                url = window.createObjectURL(file) ;
            } else if (window.URL!=undefined) { // mozilla(firefox)
                url = window.URL.createObjectURL(file) ;
            } else if (window.webkitURL!=undefined) { // webkit or chrome
                url = window.webkitURL.createObjectURL(file) ;
            }
            $image_item.attr('src', url)
        });
        $('input[name="title_photo_id"]').change(function(){
            file = this.files[0]
            var $image_item = $('.title_photo_id')
            var url = null ;
            if (window.createObjectURL!=undefined) { // basic
                url = window.createObjectURL(file) ;
            } else if (window.URL!=undefined) { // mozilla(firefox)
                url = window.URL.createObjectURL(file) ;
            } else if (window.webkitURL!=undefined) { // webkit or chrome
                url = window.webkitURL.createObjectURL(file) ;
            }
            $image_item.attr('src', url)
        });
    })
    
    </script>
{% endblock %}


